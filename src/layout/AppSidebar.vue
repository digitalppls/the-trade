<script setup>
import AppMenu from './AppMenu.vue';
import { useLayout } from '@/layout/composables/layout';

const { layoutState } = useLayout();

let timeout = null;

const onMouseEnter = () => {
    if (!layoutState.anchored.value) {
        if (timeout) {
            clearTimeout(timeout);
            timeout = null;
        }
        layoutState.sidebarActive.value = true;
    }
};

const onMouseLeave = () => {
    if (!layoutState.anchored.value) {
        if (!timeout) {
            timeout = setTimeout(() => (layoutState.sidebarActive.value = false), 300);
        }
    }
};

const anchor = () => {
    layoutState.anchored.value = !layoutState.anchored.value;
};
</script>

<template>
    <div class="layout-sidebar" @mouseenter="onMouseEnter" @mouseleave="onMouseLeave">
        <div class="sidebar-header">
            <router-link :to="{ name: 'my-accounts' }" class="app-logo">
              <svg width="126" height="18" viewBox="0 0 126 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="app-logo-normal">
                <path d="M5.80799 17C5.91999 17 6.03199 16.888 6.14399 16.664C6.25599 16.44 6.31199 16.072 6.31199 15.56V5.96C6.31199 5.608 6.27199 5.4 6.19199 5.336C6.11199 5.272 5.83199 5.24 5.35199 5.24H3.59999C2.67199 5.24 1.91999 5.344 1.34399 5.552C0.78399 5.744 0.41599 5.928 0.23999 6.104L0.71999 3.32V2.6H15.6V3.32L16.08 6.104C15.904 5.928 15.528 5.744 14.952 5.552C14.392 5.344 13.648 5.24 12.72 5.24H10.992C10.496 5.24 10.208 5.272 10.128 5.336C10.048 5.4 10.008 5.608 10.008 5.96V15.56C10.008 16.072 10.064 16.44 10.176 16.664C10.288 16.888 10.4 17 10.512 17H5.80799Z" fill="var(--logo-color)"/>
                <path d="M19.3685 17C19.4805 17 19.5845 16.888 19.6805 16.664C19.7925 16.44 19.8485 16.072 19.8485 15.56V1.88C19.8485 1.368 19.7925 1.008 19.6805 0.800004C19.5845 0.576004 19.4805 0.456003 19.3685 0.440002H23.2565V6.992L23.2085 7.304L23.2565 7.352C23.3045 7.24 23.4565 7.04 23.7125 6.752C23.9685 6.464 24.3365 6.192 24.8165 5.936C25.2965 5.664 25.8885 5.528 26.5925 5.528C28.0805 5.528 29.2165 5.952 30.0005 6.8C30.8005 7.648 31.2005 8.976 31.2005 10.784V15.56C31.2005 16.072 31.2485 16.44 31.3445 16.664C31.4565 16.888 31.5685 17 31.6805 17H27.3125C27.4245 17 27.5285 16.888 27.6245 16.664C27.7365 16.44 27.7925 16.072 27.7925 15.56V10.856C27.7925 10.104 27.7125 9.52 27.5525 9.104C27.3925 8.672 27.1685 8.368 26.8805 8.192C26.6085 8.016 26.2885 7.928 25.9205 7.928C25.4725 7.928 25.0405 8.04 24.6245 8.264C24.2245 8.472 23.8965 8.808 23.6405 9.272C23.3845 9.72 23.2565 10.32 23.2565 11.072V15.56C23.2565 16.072 23.3045 16.44 23.4005 16.664C23.5125 16.888 23.6245 17 23.7365 17H19.3685Z" fill="var(--logo-color)"/>
                <path d="M41.8339 17.24C40.5699 17.24 39.5139 17.112 38.6659 16.856C37.8339 16.584 37.1699 16.2 36.6739 15.704C36.1779 15.192 35.8259 14.576 35.6179 13.856C35.4099 13.136 35.3059 12.32 35.3059 11.408C35.3059 9.6 35.8099 8.168 36.8179 7.112C37.8259 6.056 39.3699 5.528 41.4499 5.528C42.6659 5.528 43.6499 5.696 44.4019 6.032C45.1699 6.368 45.7539 6.816 46.1539 7.376C46.5539 7.936 46.8259 8.56 46.9699 9.248C47.1299 9.92 47.2099 10.6 47.2099 11.288V12.416C47.2099 12.368 46.9859 12.32 46.5379 12.272C46.1059 12.208 45.3699 12.176 44.3299 12.176H38.7619C38.7619 13.056 39.0259 13.72 39.5539 14.168C40.0979 14.6 40.9779 14.816 42.1939 14.816C43.2179 14.816 44.1299 14.696 44.9299 14.456C45.7459 14.2 46.3379 13.96 46.7059 13.736V14.456L46.9459 16.28C46.6419 16.488 46.0579 16.704 45.1939 16.928C44.3299 17.136 43.2099 17.24 41.8339 17.24ZM39.6499 10.112H43.8019C43.8019 9.76 43.7219 9.416 43.5619 9.08C43.4179 8.744 43.1779 8.472 42.8419 8.264C42.5059 8.04 42.0419 7.928 41.4499 7.928C40.8579 7.928 40.3779 8.016 40.0099 8.192C39.6579 8.368 39.3939 8.584 39.2179 8.84C39.0579 9.096 38.9779 9.36 38.9779 9.632C38.9779 9.792 39.0259 9.912 39.1219 9.992C39.2179 10.072 39.3939 10.112 39.6499 10.112Z" fill="var(--logo-color)"/>
                <path d="M54.5346 17C54.6466 17 54.7586 16.888 54.8706 16.664C54.9826 16.44 55.0386 16.072 55.0386 15.56V5.96C55.0386 5.608 54.9986 5.4 54.9186 5.336C54.8386 5.272 54.5586 5.24 54.0786 5.24H52.3266C51.3986 5.24 50.6466 5.344 50.0706 5.552C49.5106 5.744 49.1426 5.928 48.9666 6.104L49.4466 3.32V2.6H64.3266V3.32L64.8066 6.104C64.6306 5.928 64.2546 5.744 63.6786 5.552C63.1186 5.344 62.3746 5.24 61.4466 5.24H59.7186C59.2226 5.24 58.9346 5.272 58.8546 5.336C58.7746 5.4 58.7346 5.608 58.7346 5.96V15.56C58.7346 16.072 58.7906 16.44 58.9026 16.664C59.0146 16.888 59.1266 17 59.2386 17H54.5346Z" fill="var(--logo-color)"/>
                <path d="M68.0951 17C68.2071 17 68.3111 16.888 68.4071 16.664C68.5191 16.44 68.5751 16.072 68.5751 15.56V7.448C68.5751 6.936 68.5191 6.576 68.4071 6.368C68.3111 6.144 68.2071 6.024 68.0951 6.008C68.7991 6.008 69.5191 5.96 70.2551 5.864C70.9911 5.752 71.5671 5.64 71.9831 5.528V6.488L71.9351 6.896L71.9831 6.944C72.0951 6.768 72.2711 6.576 72.5111 6.368C72.7671 6.144 73.0871 5.952 73.4711 5.792C73.8711 5.616 74.3351 5.528 74.8631 5.528C75.6471 5.528 76.3431 5.64 76.951 5.864C77.5591 6.072 77.9911 6.288 78.2471 6.512L77.5271 9.728V10.448C77.2871 10.112 76.9591 9.768 76.5431 9.416C76.1431 9.064 75.6951 8.768 75.1991 8.528C74.7191 8.288 74.2231 8.168 73.7111 8.168C73.1351 8.168 72.7031 8.376 72.4151 8.792C72.1271 9.208 71.9831 9.864 71.9831 10.76V15.56C71.9831 16.072 72.0311 16.44 72.1271 16.664C72.2391 16.888 72.3511 17 72.4631 17H68.0951Z" fill="var(--logo-color)"/>
                <path d="M85.6958 17.24C84.2558 17.24 83.1038 16.96 82.2398 16.4C81.3918 15.824 80.9678 14.904 80.9678 13.64C80.9678 12.76 81.1918 12.048 81.6398 11.504C82.0878 10.96 82.6958 10.56 83.4638 10.304C84.2478 10.032 85.1358 9.896 86.1278 9.896C86.8638 9.896 87.4878 9.96 87.9998 10.088C88.5278 10.216 88.9518 10.352 89.2718 10.496C89.5918 10.64 89.7998 10.744 89.8958 10.808C89.8958 10.136 89.8238 9.592 89.6798 9.176C89.5358 8.744 89.2718 8.432 88.8878 8.24C88.5198 8.032 87.9998 7.928 87.3278 7.928C86.3518 7.928 85.4878 8.024 84.7358 8.216C83.9838 8.408 83.3678 8.632 82.8878 8.888C82.4238 9.144 82.1038 9.36 81.9278 9.536V8.816L81.6878 6.464C81.7998 6.4 82.0958 6.296 82.5758 6.152C83.0558 6.008 83.7118 5.872 84.5438 5.744C85.3758 5.6 86.3678 5.528 87.5198 5.528C89.1038 5.528 90.3118 5.76 91.1438 6.224C91.9758 6.672 92.5438 7.32 92.8478 8.168C93.1678 9.016 93.3278 10.04 93.3278 11.24V15.56C93.3278 16.008 93.3758 16.336 93.4718 16.544C93.5838 16.736 93.6958 16.888 93.8078 17H89.9198V16.496L89.9678 16.04L89.9198 15.992C89.7918 16.136 89.6078 16.28 89.3678 16.424C89.1278 16.568 88.8318 16.704 88.4798 16.832C88.1278 16.944 87.7198 17.04 87.2558 17.12C86.7918 17.2 86.2718 17.24 85.6958 17.24ZM86.8238 14.816C87.4958 14.816 88.0558 14.768 88.5038 14.672C88.9678 14.56 89.3198 14.416 89.5598 14.24C89.7998 14.048 89.9198 13.824 89.9198 13.568C89.9198 13.2 89.6398 12.896 89.0798 12.656C88.5358 12.416 87.7918 12.296 86.8478 12.296C85.9358 12.296 85.2878 12.424 84.9038 12.68C84.5358 12.936 84.3518 13.256 84.3518 13.64C84.3518 14.12 84.5678 14.44 84.9998 14.6C85.4318 14.744 86.0398 14.816 86.8238 14.816Z" fill="var(--logo-color)"/>
                <path d="M102.991 17.24C101.567 17.24 100.447 16.984 99.6306 16.472C98.8306 15.96 98.2626 15.264 97.9266 14.384C97.6066 13.504 97.4466 12.512 97.4466 11.408C97.4466 10.288 97.6066 9.288 97.9266 8.408C98.2626 7.528 98.8306 6.832 99.6306 6.32C100.447 5.792 101.567 5.528 102.991 5.528C103.471 5.528 103.903 5.568 104.287 5.648C104.687 5.728 105.039 5.84 105.343 5.984C105.663 6.112 105.943 6.28 106.183 6.488L106.231 6.464L106.183 6.008V1.88C106.183 1.368 106.127 1.008 106.015 0.800004C105.919 0.576004 105.815 0.456003 105.703 0.440002H109.591V15.56C109.591 16.072 109.639 16.44 109.735 16.664C109.847 16.888 109.959 17 110.071 17H106.183V16.688L106.255 16.232L106.183 16.208C105.943 16.416 105.663 16.6 105.343 16.76C105.023 16.904 104.663 17.016 104.263 17.096C103.879 17.192 103.455 17.24 102.991 17.24ZM103.399 14.816C103.927 14.816 104.367 14.736 104.719 14.576C105.087 14.416 105.375 14.192 105.583 13.904C105.807 13.6 105.959 13.24 106.039 12.824C106.135 12.392 106.183 11.92 106.183 11.408C106.183 10.896 106.135 10.432 106.039 10.016C105.943 9.584 105.791 9.216 105.583 8.912C105.375 8.592 105.087 8.352 104.719 8.192C104.367 8.016 103.927 7.928 103.399 7.928C102.631 7.928 102.007 8.192 101.527 8.72C101.063 9.248 100.831 10.152 100.831 11.432C100.831 12.28 100.935 12.952 101.143 13.448C101.351 13.944 101.647 14.296 102.031 14.504C102.415 14.712 102.871 14.816 103.399 14.816Z" fill="var(--logo-color)"/>
                <path d="M120.529 17.24C119.265 17.24 118.209 17.112 117.361 16.856C116.529 16.584 115.865 16.2 115.369 15.704C114.873 15.192 114.521 14.576 114.313 13.856C114.105 13.136 114.001 12.32 114.001 11.408C114.001 9.6 114.505 8.168 115.513 7.112C116.521 6.056 118.065 5.528 120.145 5.528C121.361 5.528 122.345 5.696 123.097 6.032C123.865 6.368 124.449 6.816 124.849 7.376C125.249 7.936 125.521 8.56 125.665 9.248C125.825 9.92 125.905 10.6 125.905 11.288V12.416C125.905 12.368 125.681 12.32 125.233 12.272C124.801 12.208 124.065 12.176 123.025 12.176H117.457C117.457 13.056 117.721 13.72 118.249 14.168C118.793 14.6 119.673 14.816 120.889 14.816C121.913 14.816 122.825 14.696 123.625 14.456C124.441 14.2 125.033 13.96 125.401 13.736V14.456L125.641 16.28C125.337 16.488 124.753 16.704 123.889 16.928C123.025 17.136 121.905 17.24 120.529 17.24ZM118.345 10.112H122.497C122.497 9.76 122.417 9.416 122.257 9.08C122.113 8.744 121.873 8.472 121.537 8.264C121.201 8.04 120.737 7.928 120.145 7.928C119.553 7.928 119.073 8.016 118.705 8.192C118.353 8.368 118.089 8.584 117.913 8.84C117.753 9.096 117.673 9.36 117.673 9.632C117.673 9.792 117.721 9.912 117.817 9.992C117.913 10.072 118.089 10.112 118.345 10.112Z" fill="var(--logo-color)"/>
              </svg>

              <svg width="23" height="20" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="app-logo-small">
                <path d="M8.08485 20C8.24747 20 8.4101 19.8444 8.57273 19.5333C8.73535 19.2222 8.81667 18.7111 8.81667 18V4.66667C8.81667 4.17778 8.75859 3.88889 8.64242 3.8C8.52626 3.71111 8.1197 3.66667 7.42273 3.66667H4.87879C3.53131 3.66667 2.43939 3.81111 1.60303 4.1C0.789899 4.36667 0.255556 4.62222 0 4.86667L0.69697 0.999999V0H22.303V0.999999L23 4.86667C22.7444 4.62222 22.1985 4.36667 21.3621 4.1C20.549 3.81111 19.4687 3.66667 18.1212 3.66667H15.6121C14.8919 3.66667 14.4737 3.71111 14.3576 3.8C14.2414 3.88889 14.1833 4.17778 14.1833 4.66667V18C14.1833 18.7111 14.2646 19.2222 14.4273 19.5333C14.5899 19.8444 14.7525 20 14.9152 20H8.08485Z" fill="var(--logo-color)"/>
              </svg>
            </router-link>
            <button class="layout-sidebar-anchor p-link z-2 mb-2" type="button" @click="anchor()"></button>
        </div>
        <div class="layout-menu-container">
            <AppMenu />
        </div>
    </div>
</template>

<style lang="scss" scoped></style>
